---
allowed-tools: TodoWrite, TodoRead, Bash, Read, Grep, Glob
description: "GitHub Issueの実装計画を策定"
---

## 概要

GitHub Issueに対する実装計画を策定し、Issueコメントとして投稿します。

---

## 前提条件

- ラベルは `soba:planning` の状態

---

## ルール

1. **コード修正は行わず、計画策定に専念**
2. **TDDを前提とした計画設計**
3. **既存アーキテクチャに従う**
4. **実行可能な単位にステップ分割**
5. **テンプレート形式で計画作成**
6. **完了後ラベルを `soba:ready` に更新**

---

## 実行手順

1. **Issue確認**
   - `gh issue view <番号>` で内容確認
   - `gh issue view <番号> --comments` でコメント確認

2. **コードベース調査**
   - 関連ファイル・過去実装を確認
   - 影響範囲と依存関係を特定

3. **技術選定**
   - 使用ライブラリ・パターンを決定
   - 選定理由を明確化

4. **実装ステップ定義**
   - テスト可能な単位に分割
   - 関連ファイル・副作用を記載

5. **テスト・リスク・スケジュール策定**
   - テスト計画（単体・統合）
   - リスクと対策
   - 実装期間の見積もり

6. **計画ファイル作成**
   - `./.tmp/plan-[slug].md` に保存

7. **コメント投稿**
   - `gh issue comment <番号> --body-file ./.tmp/plan-[slug].md`

8. **ラベル更新**
   - `gh issue edit <番号> --remove-label "soba:planning" --add-label "soba:ready"`

---

## テンプレート

```markdown
# 実装計画: [タイトル]

## 要件概要
- [目的と背景]
- [機能要件]
- [受け入れ条件]

## 設計方針
- [技術選定と理由]
- [アーキテクチャ上の考慮点]

## 実装ステップ
1. [ステップ名]
   - 作業内容: [詳細]
   - 関連ファイル: [ファイルパス]

## テスト計画
- 単体テスト: [対象とケース]
- 統合テスト: [シナリオ]

## リスクと対策
- リスク: [内容]
  対策: [方法]

## スケジュール
- 見積もり: 合計[X]時間
- ステップ別: 各[Y]時間
```
